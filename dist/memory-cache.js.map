{"version":3,"sources":["../src/memory-cache.js"],"names":["MemoryCache","cache","size","prototype","add","key","value","time","timeoutCallback","old","instance","entry","expire","Date","now","timeout","setTimeout","delete","Object","keys","length","clearTimeout","get","getValue","clear","forEach","module","exports"],"mappings":";;AAAA,SAASA,WAAT,GAAuB;AACrB,OAAKC,KAAL,GAAa,EAAb;AACA,OAAKC,IAAL,GAAY,CAAZ;AACD;;AAEDF,YAAYG,SAAZ,CAAsBC,GAAtB,GAA4B,UAASC,GAAT,EAAcC,KAAd,EAAqBC,IAArB,EAA2BC,eAA3B,EAA4C;AACtE,MAAIC,MAAM,KAAKR,KAAL,CAAWI,GAAX,CAAV;AACA,MAAIK,WAAW,IAAf;;AAEA,MAAIC,QAAQ;AACVL,WAAOA,KADG;AAEVM,YAAQL,OAAOM,KAAKC,GAAL,EAFL;AAGVC,aAASC,WAAW,YAAW;AAC7BN,eAASO,MAAT,CAAgBZ,GAAhB;AACA,aAAOG,mBAAmB,OAAOA,eAAP,KAA2B,UAA9C,IAA4DA,gBAAgBF,KAAhB,EAAuBD,GAAvB,CAAnE;AACD,KAHQ,EAGNE,IAHM;AAHC,GAAZ;;AASA,OAAKN,KAAL,CAAWI,GAAX,IAAkBM,KAAlB;AACA,OAAKT,IAAL,GAAYgB,OAAOC,IAAP,CAAY,KAAKlB,KAAjB,EAAwBmB,MAApC;;AAEA,SAAOT,KAAP;AACD,CAjBD;;AAmBAX,YAAYG,SAAZ,CAAsBc,MAAtB,GAA+B,UAASZ,GAAT,EAAc;AAC3C,MAAIM,QAAQ,KAAKV,KAAL,CAAWI,GAAX,CAAZ;;AAEA,MAAIM,KAAJ,EAAW;AACTU,iBAAaV,MAAMI,OAAnB;AACD;;AAED,SAAO,KAAKd,KAAL,CAAWI,GAAX,CAAP;;AAEA,OAAKH,IAAL,GAAYgB,OAAOC,IAAP,CAAY,KAAKlB,KAAjB,EAAwBmB,MAApC;;AAEA,SAAO,IAAP;AACD,CAZD;;AAcApB,YAAYG,SAAZ,CAAsBmB,GAAtB,GAA4B,UAASjB,GAAT,EAAc;AACxC,MAAIM,QAAQ,KAAKV,KAAL,CAAWI,GAAX,CAAZ;;AAEA,SAAOM,KAAP;AACD,CAJD;;AAMAX,YAAYG,SAAZ,CAAsBoB,QAAtB,GAAiC,UAASlB,GAAT,EAAc;AAC7C,MAAIM,QAAQ,KAAKW,GAAL,CAASjB,GAAT,CAAZ;;AAEA,SAAOM,SAASA,MAAML,KAAtB;AACD,CAJD;;AAMAN,YAAYG,SAAZ,CAAsBqB,KAAtB,GAA8B,YAAW;AACvCN,SAAOC,IAAP,CAAY,KAAKlB,KAAjB,EAAwBwB,OAAxB,CAAgC,UAASpB,GAAT,EAAc;AAC5C,SAAKY,MAAL,CAAYZ,GAAZ;AACD,GAFD,EAEG,IAFH;;AAIA,SAAO,IAAP;AACD,CAND;;AAQAqB,OAAOC,OAAP,GAAiB3B,WAAjB","file":"memory-cache.js","sourcesContent":["function MemoryCache() {\n  this.cache = {}\n  this.size = 0\n}\n\nMemoryCache.prototype.add = function(key, value, time, timeoutCallback) {\n  var old = this.cache[key]\n  var instance = this\n\n  var entry = {\n    value: value,\n    expire: time + Date.now(),\n    timeout: setTimeout(function() {\n      instance.delete(key)\n      return timeoutCallback && typeof timeoutCallback === 'function' && timeoutCallback(value, key)\n    }, time)\n  }\n\n  this.cache[key] = entry\n  this.size = Object.keys(this.cache).length\n\n  return entry\n}\n\nMemoryCache.prototype.delete = function(key) {\n  var entry = this.cache[key]\n\n  if (entry) {\n    clearTimeout(entry.timeout)\n  }\n\n  delete this.cache[key]\n\n  this.size = Object.keys(this.cache).length\n\n  return null\n}\n\nMemoryCache.prototype.get = function(key) {\n  var entry = this.cache[key]\n\n  return entry\n}\n\nMemoryCache.prototype.getValue = function(key) {\n  var entry = this.get(key)\n\n  return entry && entry.value\n}\n\nMemoryCache.prototype.clear = function() {\n  Object.keys(this.cache).forEach(function(key) {\n    this.delete(key)\n  }, this)\n\n  return true\n}\n\nmodule.exports = MemoryCache\n"]}